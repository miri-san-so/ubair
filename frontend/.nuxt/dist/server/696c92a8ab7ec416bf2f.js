exports.ids=[1],exports.modules={25:function(t,e,o){var content=o(44);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=o(4).default;t.exports.__inject__=function(t){n("0b070394",content,!0,t)}},26:function(t,e,o){var content=o(46);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=o(4).default;t.exports.__inject__=function(t){n("8d1eabba",content,!0,t)}},27:function(t,e,o){var content=o(48);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=o(4).default;t.exports.__inject__=function(t){n("610560dc",content,!0,t)}},28:function(t,e,o){var content=o(50);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=o(4).default;t.exports.__inject__=function(t){n("4c24b3d6",content,!0,t)}},43:function(t,e,o){"use strict";o.r(e);var n=o(25),r=o.n(n);for(var d in n)"default"!==d&&function(t){o.d(e,t,(function(){return n[t]}))}(d);e.default=r.a},44:function(t,e,o){(e=o(3)(!1)).push([t.i,"*[data-v-17efdb2a]{font-family:Inter,sans-serif;margin:0;padding:0;box-sizing:border-box;font-weight:400;font-size:1em}h3[data-v-17efdb2a]{margin-bottom:.5rem}h3[data-v-17efdb2a],h4[data-v-17efdb2a]{font-size:.9em}.bold[data-v-17efdb2a]{font-weight:600}span[data-v-17efdb2a]{font-size:.85em}.italic[data-v-17efdb2a]{font-style:italic}.card[data-v-17efdb2a]{word-break:break-all;display:flex;flex-direction:column;padding:2rem;background:linear-gradient(300.68deg,#0f0f0f .01%,transparent 42.67%,#0f0f0f 92.06%);border-radius:.8rem;margin:1rem 1rem 3rem}button[data-v-17efdb2a]:focus{outline:none}.accept[data-v-17efdb2a]{border:none;background-color:#00ff85;color:#000;width:80%;padding:1em;margin-top:1em;justify-self:center;align-self:center}.margin-bottom[data-v-17efdb2a]{margin-bottom:1.3em}",""]),t.exports=e},45:function(t,e,o){"use strict";o.r(e);var n=o(26),r=o.n(n);for(var d in n)"default"!==d&&function(t){o.d(e,t,(function(){return n[t]}))}(d);e.default=r.a},46:function(t,e,o){(e=o(3)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@600;700&family=Montserrat:ital,wght@0,700;1,500&display=swap);"]),e.push([t.i,"*[data-v-bcf952f2]{font-family:Inter,sans-serif}.slidecontainer[data-v-bcf952f2]{width:100%}.slider[data-v-bcf952f2]{-webkit-appearance:none;width:calc(100vw - 4rem);height:.1rem;border-radius:5px;background:#fff;outline:none;opacity:.7;transition:opacity .2s;padding-left:.5rem;padding-right:.5rem;margin-bottom:3rem;margin-top:2rem}.slider[data-v-bcf952f2]:hover{opacity:1}h1[data-v-bcf952f2]{font-weight:700}.slider[data-v-bcf952f2]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:1rem;height:1rem;background:#fff;cursor:pointer;border-radius:.5rem}.slider[data-v-bcf952f2]::-moz-range-thumb{width:1rem;height:1rem;border-radius:.5rem;background:#fff;cursor:pointer}svg[data-v-bcf952f2]{transform:translateY(3px);margin-left:1rem}span[data-v-bcf952f2]{padding:.5rem 1rem;border-radius:1rem;font-size:.7rem;border:1px solid #4c4c4c;font-weight:500;font-family:Montserrat,sans-serif;margin-bottom:2rem}.info[data-v-bcf952f2]{padding:0 2rem;height:calc(85vh - 1rem);display:grid;grid-template-rows:1fr 2fr 2.5fr .5fr 1fr;grid-gap:1rem;gap:1rem}.payment-request[data-v-bcf952f2]{width:100%;display:flex;justify-content:center;align-items:center}.received[data-v-bcf952f2]{height:-webkit-max-content;height:-moz-max-content;height:max-content;align-self:self-start;justify-self:self-start;place-self:self-start}.payment-info[data-v-bcf952f2]{display:grid}.rating_text[data-v-bcf952f2]{font-size:1rem;border-radius:2.5rem;padding:1rem 2rem;align-self:center;opacity:0;-webkit-animation:slideup-data-v-bcf952f2 .3s ease-in-out forwards;animation:slideup-data-v-bcf952f2 .3s ease-in-out forwards}h3[data-v-bcf952f2]{font-family:Montserrat,sans-serif;font-size:.6rem;font-weight:500;letter-spacing:.5em}.rating[data-v-bcf952f2]{width:100%;display:flex;flex-direction:column;justify-content:center}button[data-v-bcf952f2]{font-family:Montserrat,sans-serif;width:-webkit-max-content!important;width:-moz-max-content!important;width:max-content!important;padding:1rem 1.5rem;background-color:#00ff85;border:1px solid #4c4c4c;color:#000;font-weight:500;text-align:center;border-radius:5px;justify-self:self-end;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;grid-row:5}button[data-v-bcf952f2]:disabled{-webkit-filter:grayscale(50);filter:grayscale(50)}.btn[data-v-bcf952f2]{transition:finite .3s ease-in-out}@-webkit-keyframes slideup-data-v-bcf952f2{0%{opacity:0;margin-left:-50px}to{opacity:1;margin-left:0}}@keyframes slideup-data-v-bcf952f2{0%{opacity:0;margin-left:-50px}to{opacity:1;margin-left:0}}",""]),t.exports=e},47:function(t,e,o){"use strict";o.r(e);var n=o(27),r=o.n(n);for(var d in n)"default"!==d&&function(t){o.d(e,t,(function(){return n[t]}))}(d);e.default=r.a},48:function(t,e,o){(e=o(3)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Montserrat&display=swap);"]),e.push([t.i,"*[data-v-196052da]{font-family:Inter,sans-serif;margin:0;padding:0;box-sizing:border-box;font-weight:400;font-size:1em}h3[data-v-196052da]{margin-bottom:.5rem}h3[data-v-196052da],h4[data-v-196052da]{font-size:.9em}.bold[data-v-196052da]{font-weight:600}span[data-v-196052da]{font-size:.85em}.italic[data-v-196052da]{font-style:italic}.card[data-v-196052da]{word-break:break-all;display:flex;flex-direction:column;padding:2rem;background:linear-gradient(300.68deg,#0f0f0f .01%,transparent 42.67%,#0f0f0f 92.06%);border-radius:.8rem;margin:1rem 1rem 3rem}button[data-v-196052da]:focus{outline:none}.accept[data-v-196052da]{border:none;background-color:#00ff85;color:#000;width:80%;padding:1em;margin-top:1em;justify-self:center;align-self:center}.margin-bottom[data-v-196052da]{margin-bottom:1.3em}.trip[data-v-196052da]{display:grid;margin:0 2rem}.data[data-v-196052da]{display:flex;flex-direction:column;justify-content:space-between;margin-top:2rem;margin-bottom:2rem}.detailsHeading[data-v-196052da]{border-left:1.5px solid #0fa;padding-left:1em;font-size:1em;font-weight:600;font-family:Montserrat,sans-serif;letter-spacing:.15rem}input[data-v-196052da]{background-color:transparent;color:#fff;border:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:9em}input[data-v-196052da]:focus{outline:none;border:none}button[data-v-196052da]{width:100%;padding:.9em;border:none}buton[data-v-196052da]:focus{outline:none}.green[data-v-196052da]{background-color:#00ff85;color:#000;margin-top:2rem;margin-bottom:2rem}.gmap[data-v-196052da]{padding-left:1em;border-left:1px solid #6495ed;height:-webkit-max-content;height:-moz-max-content;height:max-content}.red[data-v-196052da]{background-color:tomato;color:#fff}.btn[data-v-196052da]{color:#000;background-color:transparent;margin-top:2rem;font-weight:600;letter-spacing:.15rem;font-size:.8em}.btn[data-v-196052da],.btn[data-v-196052da]:focus{border:none;outline:none}.complete-btn[data-v-196052da]{-webkit-animation:slide_up-data-v-196052da .3s ease-in-out .3s forwards;animation:slide_up-data-v-196052da .3s ease-in-out .3s forwards;background-color:#00ff85;margin-bottom:2rem}.cancel-btn[data-v-196052da],.complete-btn[data-v-196052da]{opacity:0;transition:all .3s ease-in-out}.cancel-btn[data-v-196052da]{-webkit-animation:slide_up-data-v-196052da .3s ease-in-out forwards;animation:slide_up-data-v-196052da .3s ease-in-out forwards;background-color:#ff3a3a;font-weight:700;color:#fff}.controls[data-v-196052da]{width:100%;justify-self:flex-end}.notification[data-v-196052da]{margin:1em 0;background:#cd5c5c;padding:1em;text-align:center;position:absolute;bottom:1rem;left:50%;transform:translateX(-50%);width:90%;-webkit-animation:sad-data-v-196052da 2s ease-in-out forwards;animation:sad-data-v-196052da 2s ease-in-out forwards}@-webkit-keyframes sad-data-v-196052da{0%{opacity:0;bottom:0}30%{opacity:1;bottom:1rem}80%{opacity:1;bottom:1rem}to{opacity:0;bottom:0}}@keyframes sad-data-v-196052da{0%{opacity:0;bottom:0}30%{opacity:1;bottom:1rem}80%{opacity:1;bottom:1rem}to{opacity:0;bottom:0}}@-webkit-keyframes slide_up-data-v-196052da{0%{opacity:0;transform:translateY(-5%)}to{opacity:1;transform:translateY(0)}}@keyframes slide_up-data-v-196052da{0%{opacity:0;transform:translateY(-5%)}to{opacity:1;transform:translateY(0)}}",""]),t.exports=e},49:function(t,e,o){"use strict";o.r(e);var n=o(28),r=o.n(n);for(var d in n)"default"!==d&&function(t){o.d(e,t,(function(){return n[t]}))}(d);e.default=r.a},50:function(t,e,o){(e=o(3)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css?family=Inter:400,800&display=swap);"]),e.push([t.i,".notification[data-v-5441c36d]{margin:1em 0;background:#cd5c5c;padding:1em;text-align:center;position:absolute;bottom:1rem;left:50%;transform:translateX(-50%);width:90%;-webkit-animation:sad-data-v-5441c36d 2s ease-in-out forwards;animation:sad-data-v-5441c36d 2s ease-in-out forwards;z-index:2}@-webkit-keyframes sad-data-v-5441c36d{0%{opacity:0;bottom:0}30%{opacity:1;bottom:1rem}80%{opacity:1;bottom:1rem}to{opacity:0;bottom:0}}@keyframes sad-data-v-5441c36d{0%{opacity:0;bottom:0}30%{opacity:1;bottom:1rem}80%{opacity:1;bottom:1rem}to{opacity:0;bottom:0}}*[data-v-5441c36d]{margin:0;padding:0;box-sizing:border-box;font-family:Inter,sans-serif}.pos[data-v-5441c36d]{padding:2rem;font-size:.7em;text-align:center}.passengers[data-v-5441c36d],.pos[data-v-5441c36d]{display:flex;margin:0;flex-direction:column;justify-content:center;align-items:center}button[data-v-5441c36d]:focus{outline:none}.allTrips[data-v-5441c36d]{margin-top:3rem;margin-bottom:10rem}.h3[data-v-5441c36d]{margin:1rem 0;font-size:.8em;letter-spacing:.25em}.bold[data-v-5441c36d]{font-weight:800}.all[data-v-5441c36d]{display:flex;flex-direction:column;justify-content:center}.find[data-v-5441c36d]{pointer-events:all;cursor:pointer;border:none;background-color:#00ff85;color:#000;width:100%;font-weight:600;position:fixed;bottom:0;right:0;padding:2rem 1rem}",""]),t.exports=e},79:function(t,e,o){"use strict";o.r(e);var n={name:"TripCard",props:{trip:{type:Object}},methods:{acceptRide(t){console.log("Emiiting Trip : ",this.trip),this.$emit("passengerId",this.trip)}}},r=o(1);var d=Object(r.a)(n,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"card",attrs:{id:t.trip.id}},[t._ssrNode('<div class="margin-bottom pickup-info" data-v-17efdb2a><h3 class="bold" data-v-17efdb2a>Pickup:</h3> <h4 data-v-17efdb2a>'+t._ssrEscape(t._s(t.trip.pickup_location.address.label))+'</h4></div> <div class="margin-bottom drop-info" data-v-17efdb2a><h3 class="bold" data-v-17efdb2a>Dropoff:</h3> <h4 data-v-17efdb2a>'+t._ssrEscape(t._s(t.trip.drop_location.address.label))+'</h4></div> <span class="margin-bottom bold" data-v-17efdb2a>'+t._ssrEscape("Estimated fare is : Rs."+t._s((t.trip.trip_distance/1e3*17).toFixed(2)))+'</span> <span class="margin-bottom bold" data-v-17efdb2a>'+t._ssrEscape(t._s(t.trip.trip_info))+'</span> <button class="margin-bottom accept" data-v-17efdb2a>\n    Accept Ride!\n  </button>')])}),[],!1,(function(t){var e=o(43);e.__inject__&&e.__inject__(t)}),"17efdb2a","ee308672").exports,c={name:"PassengerCompletedTrip.vue",data:()=>({rating_value:null,is_received:!1,tripFare:0}),props:{socket:{type:Object},passengerInfo:{type:Object},cancelFare:{type:String,default:null},trip:{type:Object}},methods:{received(){this.is_received=!0,console.log("recieved");let t=this.passengerInfo.phone_number;this.socket.emit("receive",t,!0)},exit(){this.socket.disconnect();var t=new Headers;t.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),t.append("Content-Type","application/json");var e=JSON.stringify({phone_number:this.passengerInfo.phone_number,rating_value:Number(this.rating_value)});fetch("http://localhost:4002/rating",{method:"POST",headers:t,body:e,redirect:"follow"}).then(t=>t.text()).then(t=>{this.$router.push({path:"/profile"})}).catch(t=>console.log("error",t))},ratingVal(t){this.rating_value=t.target.value}},created(){var t=new Headers;t.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),t.append("Content-Type","application/json");var e=JSON.stringify({tripId:this.trip._id});fetch("http://localhost:4003/completed",{method:"POST",headers:t,body:e,redirect:"follow"}).then(t=>t.text()).then(t=>{console.log(t),this.tripFare=JSON.parse(t).fare}).catch(t=>console.log("error",t))}};var l={name:"DriverSocket",components:{DriverCompletedTrip:Object(r.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"info"},[t._ssrNode('<div class="payment-request" data-v-bcf952f2><span data-v-bcf952f2>Please Collect The Money From The Passenger</span></div> <div class="payment-info" data-v-bcf952f2><h3 data-v-bcf952f2>TRIP COMPLETED</h3> '+(null==t.cancelFare?"<h1 data-v-bcf952f2>"+t._ssrEscape("Rs. "+t._s(t.tripFare.toFixed(2)))+"</h1>":"\x3c!----\x3e")+" "+(null!=t.cancelFare?"<h1 data-v-bcf952f2>"+t._ssrEscape("Rs. "+t._s(t.cancelFare))+"</h1>":"\x3c!----\x3e")+' <button class="received" data-v-bcf952f2>RECEIVED</button></div> <div class="rating" data-v-bcf952f2><h3 data-v-bcf952f2>RATE Passenger</h3> <div data-v-bcf952f2><input'+t._ssrAttr("disabled",!t.is_received)+' type="range" min="1" max="5" value="1" id="rating" class="slider" data-v-bcf952f2> '+(1==t.rating_value?'<span class="rating_text" data-v-bcf952f2>😭   Really Bad</span>':"\x3c!----\x3e")+" "+(2==t.rating_value?'<span class="rating_text" data-v-bcf952f2>😔   Not So Good</span>':"\x3c!----\x3e")+" "+(3==t.rating_value?'<span class="rating_text" data-v-bcf952f2>😐   Ok</span>':"\x3c!----\x3e")+" "+(4==t.rating_value?'<span class="rating_text" data-v-bcf952f2>😄   Good</span>':"\x3c!----\x3e")+" "+(5==t.rating_value?'<span class="rating_text" data-v-bcf952f2>😝   Awesome</span>':"\x3c!----\x3e")+"</div></div> <button"+t._ssrAttr("disabled",!t.is_received)+' class="btn" data-v-bcf952f2>\n    EXIT\n    <svg width="10" height="13" viewBox="0 0 10 13" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bcf952f2><path d="M1 1L8.5 7L1 12.5" stroke="black" data-v-bcf952f2></path></svg></button>')])}),[],!1,(function(t){var e=o(45);e.__inject__&&e.__inject__(t)}),"bcf952f2","8690af74").exports},props:{tripDetails:{type:Object},socket:{type:Object}},data:()=>({passengerInfo:{},num:0,notif:!1,notif_msg:"",tripStarted:!1,tripCompleted:!1,cancelFare:null,trip:{type:Object}}),methods:{copyNumber(){var t=document.getElementById("phn");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),this.notif=!0,setTimeout(()=>this.notif=!1,2e3),this.notif_msg="Copied the Phone Number"},getPassengerInfo(){var t=new Headers;t.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),t.append("Content-Type","application/json");var e=JSON.stringify({id:this.tripDetails._id});fetch("http://localhost:4003/getTrip",{method:"POST",headers:t,body:e,redirect:"follow"}).then(t=>t.text()).then(t=>{null!=t&&(this.passengerInfo=JSON.parse(t),this.num=JSON.parse(t).phone_number)}).catch(t=>console.log("error",t))},startTrip(){this.tripStarted=!0;let t=this.passengerInfo.phone_number;this.socket.emit("start",t,!0)},cancelTrip(){navigator.geolocation!={}&&navigator.geolocation.getCurrentPosition(data=>{let t=data.coords.latitude,e=data.coords.longitude;var o=new Headers;o.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),o.append("Content-Type","application/json");var n=JSON.stringify({lat:this.trip.pickup_lat,long:this.trip.pickup_long,dropoff:`${t}, ${e}`});fetch("http://localhost:4001/getPrice",{method:"POST",headers:o,body:n,redirect:"follow"}).then(t=>t.text()).then(t=>{this.cancelFare=JSON.parse(t).fare,this.tripCompleted=!0;let e=this.passengerInfo.phone_number;this.trip.cancelFare=this.cancelFare;let o=this.trip;console.log("emitting complete on cancel..."),this.socket.emit("complete",e,!0,o);var n=new Headers;n.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),n.append("Content-Type","application/json");var r=JSON.stringify({_id:this.trip._id,cancelFare:this.cancelFare});fetch("http://localhost:4003/cancel",{method:"POST",headers:n,body:r,redirect:"follow"}).then(t=>t.text()).then(t=>{console.log(t)}).catch(t=>console.log("error",t))}).catch(t=>console.log("error",t))})},completeTrip(){this.tripCompleted=!0;let t=this.passengerInfo.phone_number,e=this.trip;this.socket.emit("complete",t,!0,e),console.log("Do Stuff After Completed")}},created(){this.getPassengerInfo();const t={passengerId:this.tripDetails._id,driverName:JSON.parse(localStorage.data).name,driverPhoneNumber:JSON.parse(localStorage.data).phone_number,trip_distance:this.tripDetails.trip_distance,pickup_label:this.tripDetails.pickup_location.address.label,dropoff_label:this.tripDetails.drop_location.address.label,trip_info:this.tripDetails.trip_info};var e=new Headers;e.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),e.append("Content-Type","application/json");var o=JSON.stringify(t);fetch("http://localhost:4003/accept",{method:"POST",headers:e,body:o,redirect:"follow"}).then(t=>t.text()).then(e=>{this.trip=JSON.parse(e),this.$emit("trip",t);let data=this.trip,o=this.passengerInfo.phone_number;if(console.log(this.trip),this.socket.emit("trip",o,data),"OK"!=e){"Passenger Not Available Anymore"==JSON.parse(e).message&&(localStorage.setItem("passenger_already_accepted",!0),setTimeout(()=>{this.$router.push("/")},100))}}).catch(t=>console.log("error",t))},mounted(){setTimeout(()=>{this.socket.on("connect",()=>{console.log("connected")}),this.socket.emit("join_room",{token:JSON.parse(localStorage.data).token,num:this.num}),this.socket.on("newUser",data=>{console.log(data)}),this.socket.on("disconnect",()=>{this.removeFromQueue,console.log("disconnected")}),this.socket.on("reconnect",()=>{console.log("reconnecting...")}),this.socket.on("completed",data=>{console.log("completed"),1==data&&(this.tripCompleted=data,window.navigator.vibrate([300,300]))}),this.socket.on("pingDriver",data=>{if(1==data){this.tripCompleted=!0;let data=!0,t=this.passengerInfo.phone_number,e=this.trip;this.socket.emit("complete",t,data,e),console.log("Canceled By Passenger")}})},200)}};var f={head:{script:[{src:"https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"}]},methods:{getPassengers(){var t=new Headers;t.append("Authorization","Bearer "+JSON.parse(localStorage.data).token);fetch("http://localhost:4003/find",{method:"POST",headers:t,body:"",redirect:"follow"}).then(t=>t.text()).then(async t=>{let e=await JSON.parse(t);"Token Expired"==e.message&&(localStorage.clear(),this.$router.push({name:"login"})),null==e.message?this.trips=e:(this.notif=!0,setTimeout(()=>this.notif=!1,2e3),this.notif_msg=e.message,"Cant Find Driver, Try Refreshing page"===e.message&&(navigator.geolocation!={}?navigator.geolocation.getCurrentPosition(data=>{let t=data.coords.latitude,e=data.coords.longitude;this.lat=t,this.long=e;var o=new Headers;o.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),o.append("Content-Type","application/json");var n=JSON.stringify({lat:t,long:e});fetch("http://localhost:4001/",{method:"POST",headers:o,body:n,redirect:"follow"}).then(t=>t.text()).then(t=>{null!=JSON.parse(t).doc?this.pos=JSON.parse(t).doc.address.label:this.pos=JSON.parse(t).address.label}).catch(t=>console.log("error",t))}):(this.notif=!0,setTimeout(()=>this.notif=!1,2e3),this.notif_msg="Unable to get your location")))}).catch(t=>console.log("error",t))},makeConn(t){this.selectedTrip=t}},components:{TripCard:d,DriverSocket:Object(r.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t._ssrNode((1==t.notif?'<span class="notification" data-v-196052da>'+t._ssrEscape(t._s(t.notif_msg))+"</span>":"\x3c!----\x3e")+" "),1==t.tripCompleted?t._ssrNode("<div data-v-196052da>","</div>",[o("DriverCompletedTrip",{attrs:{cancelFare:t.cancelFare,passengerInfo:t.passengerInfo,socket:t.socket,trip:t.trip}})],1):t._e(),t._ssrNode(" "+(0==t.tripCompleted?'<div class="trip" data-v-196052da>'+(0==t.tripStarted?'<div class="passengerDetils" data-v-196052da><strong class="detailsHeading" data-v-196052da>PASSENGER DETAILS</strong> <div class="data" data-v-196052da><span data-v-196052da><strong class="bold" data-v-196052da>Name: </strong>'+t._ssrEscape(t._s(this.passengerInfo.name))+'</span> <span data-v-196052da><strong class="bold" data-v-196052da>Phone Number: </strong><input readonlytype="text" id="phn"'+t._ssrAttr("value",t.passengerInfo.phone_number)+" data-v-196052da></span></div></div>":"\x3c!----\x3e")+' <div class="TripDetails" data-v-196052da><strong class="detailsHeading" data-v-196052da>TRIP DETAILS</strong> <div class="data" data-v-196052da><div class="margin-bottom pickup-info" data-v-196052da><h3 class="bold" data-v-196052da>Pickup:</h3> <h4 data-v-196052da>'+t._ssrEscape(t._s(t.tripDetails.pickup_location.address.label))+'</h4></div> <div class="margin-bottom drop-info" data-v-196052da><h3 class="bold" data-v-196052da>Dropoff:</h3> <h4 data-v-196052da>'+t._ssrEscape(t._s(t.tripDetails.drop_location.address.label))+'</h4></div> <span class="margin-bottom bold" data-v-196052da>'+t._ssrEscape("Estimated fare is : Rs."+t._s((t.tripDetails.trip_distance/1e3*17).toFixed(2)))+'</span> <span class="margin-bottom bold" data-v-196052da>'+t._ssrEscape(t._s(t.tripDetails.trip_info))+'</span></div></div> <a target="_blank" rel="noopener noreferrer"'+t._ssrAttr("href","https://www.google.com/maps/dir/"+t.tripDetails.pickup_location.address.label+"/"+t.tripDetails.drop_location.address.label)+' class="gmap" data-v-196052da>\n      Google Maps Direction for Trip\n    </a> '+(0==t.tripStarted?'<button class="green" data-v-196052da>\n      Start Trip\n    </button>':"\x3c!----\x3e")+' <div class="controls" data-v-196052da>'+(1==t.tripStarted?'<button class="cancel-btn btn" data-v-196052da>\n        CANCEL TRIP\n      </button>':"\x3c!----\x3e")+" "+(1==t.tripStarted?'<button class="complete-btn btn" data-v-196052da>\n        TRIP COMPLETED\n      </button>':"\x3c!----\x3e")+"</div></div>":"\x3c!----\x3e"))],2)}),[],!1,(function(t){var e=o(47);e.__inject__&&e.__inject__(t)}),"196052da","73bc79ad").exports},data:()=>({selectedTrip:"",trips:[],pos:"",notif:!1,notif_msg:"",socket:{}}),mounted(){if(null!=localStorage.passenger_already_accepted&&"true"==localStorage.passenger_already_accepted&&(this.notif=!0,setTimeout(()=>{this.notif=!1,localStorage.removeItem("passenger_already_accepted")},2e3),this.notif_msg="That Passenger has been Accepted by Someone else"),0!=localStorage.length){let data=JSON.parse(localStorage.data);if(data.token){let t=new Headers;t.append("Authorization","Bearer "+data.token),fetch("http://localhost:4000/u/verify",{method:"POST",headers:t,redirect:"follow"}).then(t=>t.text()).then(t=>{if("Verified"==JSON.parse(t).message){var e=JSON.parse(localStorage.data).token.split(".")[1].replace("-","+").replace("_","/");let t=JSON.parse(window.atob(e));"driver"==t.type?navigator.geolocation?navigator.geolocation.getCurrentPosition(data=>{let t=data.coords.latitude,e=data.coords.longitude;this.lat=t,this.long=e;var o=new Headers;o.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),o.append("Content-Type","application/json");var n=JSON.stringify({lat:t,long:e});fetch("http://localhost:4001/",{method:"POST",headers:o,body:n,redirect:"follow"}).then(t=>t.text()).then(t=>{null!=JSON.parse(t).doc?this.pos=JSON.parse(t).doc.address.label:this.pos=JSON.parse(t).address.label,this.socket=io("http://localhost:4005/trip",{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:1/0}),this.socket.on("connect",()=>{console.log("connected")})}).catch(t=>console.log("error",t))}):(this.notif=!0,setTimeout(()=>this.notif=!1,2e3),this.notif_msg="Unable to get your location"):"passenger"==t.type?window.location="http://localhost:3000/ride":window.location="http://localhost:3000"}}).catch(t=>console.log("error",t))}}else window.location="http://localhost:3000"},beforeDestroy(){this.socket.disconnect()}};var m=Object(r.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"all"},[t._ssrNode((1==t.notif?'<span class="notification" data-v-5441c36d>'+t._ssrEscape(t._s(t.notif_msg))+"</span>":"\x3c!----\x3e")+" "),""!=t.selectedTrip?t._ssrNode('<div class="passengers" data-v-5441c36d>',"</div>",[o("DriverSocket",{attrs:{socket:t.socket,tripDetails:t.selectedTrip}})],1):t._e(),t._ssrNode(" "),""==t.selectedTrip||null==t.selectedTrip?t._ssrNode('<div class="passengers" data-v-5441c36d>',"</div>",[t._ssrNode('<span class="pos" data-v-5441c36d><strong data-v-5441c36d>Your Position :</strong>'+t._ssrEscape(" "+t._s(t.pos))+"</span> "+(t.trips.length>0?'<span class="h3" data-v-5441c36d>\n      Found <span class="bold" data-v-5441c36d>'+t._ssrEscape(t._s(t.trips.length)+" Passenger")+"</span> Nearby\n    </span>":"\x3c!----\x3e")+" "),t._ssrNode('<div class="allTrips" data-v-5441c36d>',"</div>",t._l(t.trips,(function(e){return o("TripCard",{key:e.id,attrs:{trip:e},on:{passengerId:t.makeConn}})})),1),t._ssrNode(' <button class="find" data-v-5441c36d>Find Me Passengers!</button>')],2):t._e()],2)}),[],!1,(function(t){var e=o(49);e.__inject__&&e.__inject__(t)}),"5441c36d","5f27cf98");e.default=m.exports}};