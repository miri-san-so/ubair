exports.ids=[2],exports.modules={29:function(t,e,r){var content=r(52);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=r(4).default;t.exports.__inject__=function(t){n("e617de52",content,!0,t)}},30:function(t,e,r){var content=r(54);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=r(4).default;t.exports.__inject__=function(t){n("5e5bcdba",content,!0,t)}},31:function(t,e,r){var content=r(56);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=r(4).default;t.exports.__inject__=function(t){n("344ee8d4",content,!0,t)}},51:function(t,e,r){"use strict";r.r(e);var n=r(29),o=r.n(n);for(var d in n)"default"!==d&&function(t){r.d(e,t,(function(){return n[t]}))}(d);e.default=o.a},52:function(t,e,r){(e=r(3)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css?family=Inter&display=swap);"]),e.push([t.i,".loading[data-v-2dda2367]{width:100%;height:calc(85vh - 1rem);display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;font-family:Inter,sans-serif}.spinner[data-v-2dda2367]{-webkit-animation:spin-data-v-2dda2367 2.3s ease-in-out infinite;animation:spin-data-v-2dda2367 2.3s ease-in-out infinite;transform-origin:center}.info[data-v-2dda2367]{height:20%;display:flex;font-size:1.2em;flex-direction:column;justify-content:space-between;align-items:center}.text[data-v-2dda2367]{letter-spacing:.35rem;font-size:.6em}.cancel[data-v-2dda2367]{background-color:red;border-radius:2rem;border:none;padding:.15rem;align-items:center;cursor:pointer}.cancel[data-v-2dda2367]:focus{outline:none}@-webkit-keyframes spin-data-v-2dda2367{0%{transform:rotate(0deg)}50%{transform:rotate(1turn)}to{transform:rotate(0deg)}}@keyframes spin-data-v-2dda2367{0%{transform:rotate(0deg)}50%{transform:rotate(1turn)}to{transform:rotate(0deg)}}",""]),t.exports=e},53:function(t,e,r){"use strict";r.r(e);var n=r(30),o=r.n(n);for(var d in n)"default"!==d&&function(t){r.d(e,t,(function(){return n[t]}))}(d);e.default=o.a},54:function(t,e,r){(e=r(3)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@600;700&family=Montserrat:ital,wght@0,700;1,500&display=swap);"]),e.push([t.i,"*[data-v-36d1242c]{font-family:Inter,sans-serif}.red[data-v-36d1242c]{background-color:#cd5c5c;font-weight:400}.slidecontainer[data-v-36d1242c]{width:100%}h1[data-v-36d1242c]{font-weight:700}.slider[data-v-36d1242c]{-webkit-appearance:none;width:calc(100vw - 4rem);height:.1rem;border-radius:5px;background:#fff;outline:none;opacity:.7;transition:opacity .2s;padding-left:.5rem;padding-right:.5rem;margin-bottom:3rem;margin-top:2rem}.slider[data-v-36d1242c]:hover{opacity:1}.slider[data-v-36d1242c]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:1rem;height:1rem;background:#fff;cursor:pointer;border-radius:.5rem}.slider[data-v-36d1242c]::-moz-range-thumb{width:25px;height:25px;background:#fff;cursor:pointer}svg[data-v-36d1242c]{transform:translateY(3px);margin-left:1rem}.recv[data-v-36d1242c]{margin-top:2rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.green[data-v-36d1242c]{background-color:#00ff85;color:#000!important}span[data-v-36d1242c]{padding:.5rem 1rem;border-radius:1rem;font-size:.7rem;border:1px solid #4c4c4c;font-weight:500;font-family:Montserrat,sans-serif;margin-bottom:2rem}.info[data-v-36d1242c]{padding:0 2rem;height:calc(85vh - 1rem);display:grid;grid-template-rows:1fr 1.5fr 2fr .5fr 1fr;grid-gap:1rem;gap:1rem}.payment-request[data-v-36d1242c]{width:100%;display:flex;justify-content:center;align-items:center}.payment-info[data-v-36d1242c]{display:grid}.rating_text[data-v-36d1242c]{font-size:1rem;border-radius:2.5rem;padding:1rem 2rem;align-self:center;opacity:0;-webkit-animation:slideup-data-v-36d1242c .3s ease-in-out forwards;animation:slideup-data-v-36d1242c .3s ease-in-out forwards}h3[data-v-36d1242c]{font-family:Montserrat,sans-serif;font-size:.6rem;font-weight:500;letter-spacing:.5em}.rating[data-v-36d1242c]{width:100%;display:flex;flex-direction:column;justify-content:center}button[data-v-36d1242c]{font-family:Montserrat,sans-serif;width:-webkit-max-content!important;width:-moz-max-content!important;width:max-content!important;padding:1rem 1.5rem;background-color:#00ff85;border:1px solid #4c4c4c;color:#000;font-weight:500;text-align:center;border-radius:5px;justify-self:self-end;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;grid-row:5}button[data-v-36d1242c]:disabled{-webkit-filter:grayscale(50);filter:grayscale(50)}.btn[data-v-36d1242c]{transition:finite .3s ease-in-out}@-webkit-keyframes slideup-data-v-36d1242c{0%{opacity:0;margin-left:-50px}to{opacity:1;margin-left:0}}@keyframes slideup-data-v-36d1242c{0%{opacity:0;margin-left:-50px}to{opacity:1;margin-left:0}}",""]),t.exports=e},55:function(t,e,r){"use strict";r.r(e);var n=r(31),o=r.n(n);for(var d in n)"default"!==d&&function(t){r.d(e,t,(function(){return n[t]}))}(d);e.default=o.a},56:function(t,e,r){(e=r(3)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Montserrat&display=swap);"]),e.push([t.i,".notification[data-v-c46bfba4]{margin:1em 0;background:#00ff85;padding:1em;text-align:center;position:absolute;bottom:1rem;left:50%;transform:translateX(-50%);width:90%;-webkit-animation:sad-data-v-c46bfba4 3s ease-in-out forwards;animation:sad-data-v-c46bfba4 3s ease-in-out forwards;color:#000;font-weight:700}@-webkit-keyframes sad-data-v-c46bfba4{0%{opacity:0;bottom:0}30%{opacity:1;bottom:1rem}80%{opacity:1;bottom:1rem}to{opacity:0;bottom:0}}@keyframes sad-data-v-c46bfba4{0%{opacity:0;bottom:0}30%{opacity:1;bottom:1rem}80%{opacity:1;bottom:1rem}to{opacity:0;bottom:0}}*[data-v-c46bfba4]{margin:0;padding:0;box-sizing:border-box}input[data-v-c46bfba4]{background-color:transparent;border:none}input[data-v-c46bfba4]:focus{border:none;outline:none}.start[data-v-c46bfba4]{width:100%;border:1px solid grey;color:grey;margin-bottom:1em;padding:.6rem;text-align:center;transition:all .3s ease-in-out;display:flex;justify-content:center;align-items:center;height:-webkit-min-content;height:-moz-min-content;height:min-content;opacity:0;-webkit-animation:slide_in-data-v-c46bfba4 .4s ease-in-out 1.5s forwards;animation:slide_in-data-v-c46bfba4 .4s ease-in-out 1.5s forwards}.control[data-v-c46bfba4]{grid-row:7}.started[data-v-c46bfba4]{background-color:#00ff85;color:#1d0c0c;transition:all .3s ease-in-out}.cancel[data-v-c46bfba4]{background-color:#ff3a3a;color:#fff;width:100%;padding:.8rem;font-weight:700;letter-spacing:.1em;font-size:1rem;height:-webkit-min-content;height:-moz-min-content;height:min-content;opacity:0;-webkit-animation:slide_in-data-v-c46bfba4 .4s ease-in-out 1.8s forwards;animation:slide_in-data-v-c46bfba4 .4s ease-in-out 1.8s forwards}.margin-top[data-v-c46bfba4]{margin-top:1rem}h1[data-v-c46bfba4]{font-family:Montserrat;font-size:.8em;font-weight:lighter;letter-spacing:.25em;margin-bottom:1em;padding-left:1em;border-left:1px solid #00ff85;opacity:0;-webkit-animation:slide_right-data-v-c46bfba4 .4s ease-in-out forwards;animation:slide_right-data-v-c46bfba4 .4s ease-in-out forwards}.Info[data-v-c46bfba4]{padding:0 2rem;font-family:Inter,sans-serif;height:calc(85vh - 1rem);display:grid;grid-template-rows:.05fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr}.driver[data-v-c46bfba4]{opacity:0;-webkit-animation:slide_in-data-v-c46bfba4 .5s ease-in-out .2s forwards;animation:slide_in-data-v-c46bfba4 .5s ease-in-out .2s forwards;margin-bottom:1em}h2[data-v-c46bfba4]{font-size:2em}.location[data-v-c46bfba4]{opacity:0;-webkit-animation:slide_in-data-v-c46bfba4 .4s ease-in-out .5s forwards;animation:slide_in-data-v-c46bfba4 .4s ease-in-out .5s forwards;padding:0;font-weight:lighter}.plate[data-v-c46bfba4]{opacity:0;-webkit-animation:slide_in-data-v-c46bfba4 .4s ease-in-out 1s forwards;animation:slide_in-data-v-c46bfba4 .4s ease-in-out 1s forwards}.plate-span[data-v-c46bfba4]{background-color:#ff0;color:#000;font-weight:700;padding:.3em .5em}h5[data-v-c46bfba4]{margin-bottom:1em;margin-top:2em}span[data-v-c46bfba4]{font-weight:lighter;font-weight:400}@-webkit-keyframes slide_in-data-v-c46bfba4{0%{transform:translateY(.8rem);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes slide_in-data-v-c46bfba4{0%{transform:translateY(.8rem);opacity:0}to{transform:translateY(0);opacity:1}}@-webkit-keyframes slide_right-data-v-c46bfba4{0%{opacity:0;transform:translateX(-.8rem)}to{opacity:1;transform:translateX(0)}}@keyframes slide_right-data-v-c46bfba4{0%{opacity:0;transform:translateX(-.8rem)}to{opacity:1;transform:translateX(0)}}",""]),t.exports=e},80:function(t,e,r){"use strict";r.r(e);var n={head:{script:[{src:"https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"}]},props:{sock:{type:Object}},methods:{closeSocket(){this.sock.disconnect();var t=new Headers;t.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),fetch("http://localhost:4001/stop",{method:"DELETE",headers:t,redirect:"follow"}).then(t=>t.text()).then(t=>console.log(t)).catch(t=>console.log("error",t))}}},o=r(1);var d=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading"},[this._ssrNode('<div class="info" data-v-2dda2367><div data-v-2dda2367><svg width="43" height="43" viewBox="0 0 43 43" fill="none" xmlns="http://www.w3.org/2000/svg" class="spinner" data-v-2dda2367><path d="M33.8898 7.12678C23.5072 5.61201 16.4276 20.0584 14.1857 27.471L40.9372 25.8502C42.9141 20.2402 44.2723 8.64154 33.8898 7.12678Z" stroke="white" data-v-2dda2367></path> <path d="M35.8734 33.8895C37.3881 23.5069 22.9417 16.4274 15.5292 14.1854L17.1499 40.937C22.7599 42.9139 34.3586 44.2721 35.8734 33.8895Z" stroke="white" data-v-2dda2367></path> <path d="M33.8898 35.8735C23.5072 37.3883 16.4276 22.9419 14.1857 15.5293L40.9372 17.1501C42.9141 22.7601 44.2723 34.3587 33.8898 35.8735Z" stroke="white" data-v-2dda2367></path> <path d="M7.12678 33.8895C5.61201 23.5069 20.0584 16.4274 27.471 14.1854L25.8502 40.937C20.2402 42.9139 8.64154 44.2721 7.12678 33.8895Z" stroke="white" data-v-2dda2367></path> <path d="M9.11088 6.50013C19.4934 4.98537 26.573 19.4318 28.8149 26.8443L2.06344 25.2236C0.0865138 19.6136 -1.27169 8.01489 9.11088 6.50013Z" stroke="white" data-v-2dda2367></path> <path d="M36.5003 9.11094C38.0151 19.4935 23.5687 26.5731 16.1561 28.815L17.7769 2.0635C23.3869 0.0865748 34.9856 -1.27163 36.5003 9.11094Z" stroke="white" data-v-2dda2367></path> <path d="M9.11088 36.5001C19.4934 38.0149 26.573 23.5685 28.8149 16.156L2.06344 17.7767C0.0865138 23.3867 -1.27169 34.9854 9.11088 36.5001Z" stroke="white" data-v-2dda2367></path> <path d="M6.50031 9.11094C4.98555 19.4935 19.4319 26.5731 26.8445 28.815L25.2237 2.0635C19.6138 0.0865761 8.01508 -1.27163 6.50031 9.11094Z" stroke="white" data-v-2dda2367></path></svg></div> <h3 class="text" data-v-2dda2367>SEARCHING FOR DRIVERS</h3></div> '),e("nuxt-link",{staticClass:"cancel",attrs:{to:"/ride"}},[e("svg",{attrs:{width:"52",height:"52",viewBox:"0 0 52 52",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M14.6673 14.6672L38.0018 38.0017M38.0018 14.6672L14.6673 38.0017",stroke:"white","stroke-width":"3","stroke-linecap":"round"}})])])],2)}),[],!1,(function(t){var e=r(51);e.__inject__&&e.__inject__(t)}),"2dda2367","8458028c").exports,c={name:"PassengerCompletedTrip.vue",data:()=>({rating_value:null,is_received:!1,tripFare:0}),props:{socket:{type:Object},driverInfo:{type:Object},trip:{type:Object}},methods:{exit(){this.socket.disconnect();var t=new Headers;t.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),t.append("Content-Type","application/json");var e=JSON.stringify({phone_number:this.driverInfo.driver.phone_number,rating_value:Number(this.rating_value)});fetch("http://localhost:4002/rating",{method:"POST",headers:t,body:e,redirect:"follow"}).then(t=>t.text()).then(t=>this.$router.push({path:"/ride"})).catch(t=>console.log("error",t))},ratingVal(t){this.rating_value=t.target.value}},mounted(){this.socket.on("received",data=>{1==data&&(document.querySelector(".recv").className+=" green",console.log("[ recieved ] : ",data),this.is_received=!0)})}};var l=Object(o.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"info"},[t._ssrNode('<div class="payment-request" data-v-36d1242c><span data-v-36d1242c>Please Pay The Money To The Driver</span></div> <div class="payment-info" data-v-36d1242c><h3 data-v-36d1242c>TRIP COMPLETED</h3> '+(null==t.trip.cancelFare?"<h1 data-v-36d1242c>"+t._ssrEscape("\n      Rs. "+t._s((t.trip.trip_distance/1e3*17).toFixed(2))+"\n    ")+"</h1>":"\x3c!----\x3e")+" "+(null!=t.trip.cancelFare?"<h1 data-v-36d1242c>"+t._ssrEscape("Rs. "+t._s(t.trip.cancelFare))+"</h1>":"\x3c!----\x3e")+" "+(0==t.is_received?'<span class="recv red" data-v-36d1242c>\n      Not Recieved Yet\n    </span>':"\x3c!----\x3e")+" "+(1==t.is_received?'<span class="recv green" data-v-36d1242c>\n      Money is Recieved\n    </span>':"\x3c!----\x3e")+'</div> <div class="rating" data-v-36d1242c><h3 data-v-36d1242c>RATE DRIVER</h3> <div data-v-36d1242c><input'+t._ssrAttr("disabled",!t.is_received)+' type="range" min="1" max="5" value="1" id="rating" class="slider" data-v-36d1242c> '+(1==t.rating_value?'<span class="rating_text" data-v-36d1242c>😭   Really Bad</span>':"\x3c!----\x3e")+" "+(2==t.rating_value?'<span class="rating_text" data-v-36d1242c>😔   Not So Good</span>':"\x3c!----\x3e")+" "+(3==t.rating_value?'<span class="rating_text" data-v-36d1242c>😐   Ok</span>':"\x3c!----\x3e")+" "+(4==t.rating_value?'<span class="rating_text" data-v-36d1242c>😄   Good</span>':"\x3c!----\x3e")+" "+(5==t.rating_value?'<span class="rating_text" data-v-36d1242c>😝   Awesome</span>':"\x3c!----\x3e")+"</div></div> <button"+t._ssrAttr("disabled",!t.is_received)+' class="btn" data-v-36d1242c>\n    EXIT\n    <svg width="10" height="13" viewBox="0 0 10 13" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-36d1242c><path d="M1 1L8.5 7L1 12.5" stroke="black" data-v-36d1242c></path></svg></button>')])}),[],!1,(function(t){var e=r(53);e.__inject__&&e.__inject__(t)}),"36d1242c","271e66f0").exports,f={name:"DisplayDriverInfo",props:{driverInfo:{type:Object},socket:{type:Object}},components:{PassengerCompletedTrip:l},data:()=>({notif:!1,notif_msg:"",tripStarted:!1,tripCompleted:!1,received:!1,cancelFare:"",trip:{}}),methods:{copyNumber(){var t=document.getElementById("phn");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),this.notif=!0,setTimeout(()=>this.notif=!1,2e3),this.notif_msg="Copied the Phone Number"},exit(){let t=JSON.parse(localStorage.data).phone_number;this.socket.emit("cancelByPassenger",t,!0)}},mounted(){this.socket.on("started",data=>{1==data&&(this.tripStarted=data,window.navigator.vibrate(300))}),this.socket.on("completed",(data,t)=>{console.log("completed"),1==data&&(this.trip=t,this.tripCompleted=data,window.navigator.vibrate([300,300]))}),this.socket.on("tripData",data=>{console.log("drop it...",data),this.trip=data})}};var v={head:{script:[{src:"https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"}]},methods:{removeFromQueue(){var t=new Headers;t.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),fetch("http://localhost:4001/stop",{method:"DELETE",headers:t,redirect:"follow"}).then(t=>t.text()).then(t=>console.log(t)).catch(t=>console.log("error",t))},getRideId(){var t=new Headers;t.append("Authorization","Bearer "+JSON.parse(localStorage.data).token),fetch("http://localhost:4001/rideId",{method:"POST",headers:t,redirect:"follow"}).then(t=>t.text()).then(t=>{this.id=JSON.parse(t)._id,this.phone_number=JSON.parse(t).phone_number}).catch(t=>console.log("error",t))}},data:()=>({socket:{type:Object},id:"",phone_number:0,driverConnected:!1,driverInfo:{}}),components:{Loading:d,DisplayDriverInfo:Object(o.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[1==t.tripCompleted?t._ssrNode("<div data-v-c46bfba4>","</div>",[r("PassengerCompletedTrip",{attrs:{trip:t.trip,socket:t.socket,driverInfo:t.driverInfo}})],1):t._e(),t._ssrNode(" "+(0==t.tripCompleted?'<div class="Info" data-v-c46bfba4>'+(1==t.notif?'<span class="notification" data-v-c46bfba4>'+t._ssrEscape(t._s(t.notif_msg))+"</span>":"\x3c!----\x3e")+' <h1 data-v-c46bfba4>YOUR DRIVER</h1> <div class="driver" data-v-c46bfba4><h2 data-v-c46bfba4>'+t._ssrEscape(t._s(t.driverInfo.driver.name))+'</h2> <input readonly="readonly" id="phn"'+t._ssrAttr("value",t.driverInfo.driver.phone_number)+' data-v-c46bfba4></div> <div class="location" data-v-c46bfba4><h5 data-v-c46bfba4>\n        Currently At :\n        <span data-v-c46bfba4>'+t._ssrEscape(t._s(t.driverInfo.locationInfo.address.label))+"</span></h5> <h5 data-v-c46bfba4>\n        Vehice : <span data-v-c46bfba4>"+t._ssrEscape(t._s(t.driverInfo.carInfo.vehicle))+'</span></h5></div> <div class="plate" data-v-c46bfba4><h5 data-v-c46bfba4>\n        License Plate :\n        <span class="plate-span" data-v-c46bfba4>'+t._ssrEscape(t._s(t.driverInfo.carInfo.vehicle_number))+'</span></h5></div> <div class="control" data-v-c46bfba4>'+(!1===t.tripStarted?'<span class="margin-top start" data-v-c46bfba4>TRIP IS NOT STARTED</span>':"\x3c!----\x3e")+" "+(!0===t.tripStarted?'<span class="margin-top start started" data-v-c46bfba4>TRIP HAS STARTED</span>':"\x3c!----\x3e")+" "+(!0===t.tripStarted?'<button class="margin-top cancel" data-v-c46bfba4>\n        CANCEL TRIP\n      </button>':"\x3c!----\x3e")+"</div></div>":"\x3c!----\x3e"))],2)}),[],!1,(function(t){var e=r(55);e.__inject__&&e.__inject__(t)}),"c46bfba4","3e90cf56").exports},created(){this.getRideId},mounted(){setTimeout(()=>{this.socket=io("http://localhost:4005/trip",{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:1/0}),this.socket.on("connect",()=>{console.log("connected")}),this.socket.emit("join_room",{token:JSON.parse(localStorage.data).token,num:JSON.parse(localStorage.data).phone_number}),this.socket.on("driverConnected",data=>{let t=data;"driver"==t.driver.type&&(this.driverConnected=!0,this.driverInfo=t)}),this.socket.on("tokenExpired",data=>{1==data&&(localStorage.clear(),this.$router.push({path:"/login"}))}),this.socket.on("disconnect",()=>{this.removeFromQueue,console.log("disconnected")})},200)},beforeDestroy(){this.socket.disconnect()}};var m=Object(o.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[1==t.driverConnected?t._ssrNode("<div>","</div>",[r("DisplayDriverInfo",{attrs:{socket:t.socket,driverInfo:t.driverInfo}})],1):t._e(),t._ssrNode(" "),0==t.driverConnected?t._ssrNode("<div>","</div>",[r("Loading",{attrs:{sock:this.socket}})],1):t._e()],2)}),[],!1,(function(t){}),null,"adafc7c4");e.default=m.exports}};